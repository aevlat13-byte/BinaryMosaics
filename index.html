<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Binary Mosaic Decode Game</title>
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <h1>Binary Mosaic: Decode Challenge</h1>
    <p>Decode the bitstream by painting the grid using the legend.</p>
  </header>

  <main>
    <section id="decodeTab" class="tab-panel active">
      <div class="panel-grid">
        <section class="panel controls">
          <h2>Decode/Challenge</h2>

          <details class="tutorial-box" id="decodeTutorial" open>
            <summary>How to play <span class="help-icon">?</span></summary>
            <ol>
              <li>Press <strong>Start levels</strong> to begin from easiest to hardest.</li>
              <li>Each grid cell shows a bit token from the bitstream.</li>
              <li>Use the legend to see which bits map to which colours.</li>
              <li>Choose your current paint colour in <strong>Paint colour</strong>.</li>
              <li>Some levels are <strong>Paint mode</strong>: choose a colour and paint each cell.</li>
              <li>Some levels are <strong>Type bits mode</strong>: the image is pre-painted and you type binary into each cell.</li>
              <li>Press <strong>Check</strong>. If correct, the game moves to the next level.</li>
            </ol>
          </details>

          <div class="tool-row">
            <button id="startLevelsBtn">Start levels</button>
            <button id="startChallengeBtn">Reset current level</button>
            <button id="checkChallengeBtn">Check</button>
          </div>
          <p id="levelStatus" class="status"></p>

          <fieldset>
            <legend>Paint colour</legend>
            <div id="paintPalette" class="palette-row" aria-label="Choose decode paint colour"></div>
          </fieldset>

          <fieldset>
            <legend>Challenge controls</legend>
            <label><input id="timerToggle" type="checkbox" checked /> Enable timer</label>
            <label><input id="showMistakesToggle" type="checkbox" checked /> Highlight incorrect cells</label>
          </fieldset>

          <fieldset>
            <legend>Accessibility</legend>
            <label><input id="colorBlindToggle" type="checkbox" /> Colour-blind-friendly palette</label>
            <label><input id="highContrastToggle" type="checkbox" /> High contrast mode</label>
          </fieldset>

          <p id="decodeStatus" class="status" role="status" aria-live="polite"></p>
          <p id="scoreOutput" class="status" aria-live="polite"></p>
        </section>

        <section class="panel">
          <h3>Decode canvas (bitstream in cells)</h3>
          <div class="decode-workspace">
            <div id="decodeGrid" class="pixel-grid" tabindex="0" aria-label="Decode grid"></div>
            <aside>
              <h4>Legend (bits â†’ colour)</h4>
              <div id="decodeLegend" class="legend-output" aria-live="polite"></div>
            </aside>
          </div>
          <p id="timerOutput">Total timer: 0s</p>
        </section>
      </div>
    </section>
  </main>

  <script src="puzzles.js"></script>
  <script src="app.js"></script>
</body>
</html>
